---
# http://<route_name>-<name_space>.cloud.<end_point>
openshift-new:
  topology:
    topology_name: openshift
    resource_groups:
      - resource_group_name: test1
        resource_group_type: openshift
        resource_definitions:
          - name: testsecret
            role: openshift_inline
            namespace: {{ namespace | default('continuous-infra') }}
            definition:
              apiVersion: v1
              data:
                password: dGVzdHBhc3N3b3Jk  # creates a secret with testpassword as password
                username: dGVzdHVzZXJuYW1l  # creates a secret with testusername as username
              kind: Secret
              metadata:
                name: testsecret
                namespace: continuous-infra
              type: kubernetes.io/basic-auth
          - name: testpod
            role: openshift_inline
            definition:
              apiVersion: v1
              kind: Pod
              metadata:
                name: test1
                namespace: {{ namespace | default('continuous-infra') }}
                labels:
                  name: test1-pod
              spec:
                containers:
                  - image: bitnami/nginx
                    name: test2
                    ports:
                      - containerPort: 8080
          - name: testservice
            role: openshift_inline
            definition:
              apiVersion: v1
              kind: Service
              metadata:
                name: test1-service
                namespace: {{ namespace | default('continuous-infra') }}
              spec:
                ports:
                  - port: 80
                    targetPort: 8080
                selector:
                  name: test1-pod
          - name: testroute
            role: openshift_inline
            definition:
              apiVersion: v1
              kind: Route
              metadata:
                name: test1-route
                namespace: {{ namespace | default('continuous-infra') }}
              spec:
                to:
                  kind: Service
                  name: test1-service
        credentials:
          filename: upshift.yaml # fetched from --creds-path is provided
          profile: default
  layout:
    inventory_layout:
      vars:
        hostname: __IP__
      hosts:
        example-node:
          count: 1
          host_groups:
            - example
